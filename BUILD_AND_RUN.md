# å¦‚ä½•æŸ¥çœ‹æŠ•ç¥¨åŠŸèƒ½

æŠ•ç¥¨åŠŸèƒ½å·²ç»å®Œå…¨é›†æˆåˆ°ä»£ç ä¸­ï¼Œä½†éœ€è¦é‡æ–°ç¼–è¯‘åº”ç”¨æ‰èƒ½çœ‹åˆ°ã€‚

## å¿«é€Ÿå¼€å§‹

### 1. æ¸…ç†å¹¶é‡æ–°æ„å»ºåº”ç”¨

```bash
cd /home/steve/Documents/fluffychat

# æ¸…ç†æ—§çš„æ„å»º
flutter clean

# é‡æ–°è·å–ä¾èµ–
flutter pub get

# é‡æ–°ç”Ÿæˆæœ¬åœ°åŒ–æ–‡ä»¶
flutter gen-l10n

# è¿è¡Œåº”ç”¨ï¼ˆæ ¹æ®ä½ çš„å¹³å°é€‰æ‹©ï¼‰
flutter run
```

### 2. é’ˆå¯¹ä¸åŒå¹³å°çš„è¿è¡Œå‘½ä»¤

**Linux æ¡Œé¢ï¼š**
```bash
flutter run -d linux
```

**Androidï¼ˆå¦‚æœè¿æ¥äº†è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ï¼‰ï¼š**
```bash
flutter run -d android
```

**Webï¼ˆåœ¨æµè§ˆå™¨ä¸­æµ‹è¯•ï¼‰ï¼š**
```bash
flutter run -d chrome
```

**æŸ¥çœ‹å¯ç”¨è®¾å¤‡ï¼š**
```bash
flutter devices
```

## å¦‚ä½•æ‰¾åˆ°æŠ•ç¥¨åŠŸèƒ½

1. **å¯åŠ¨åº”ç”¨å¹¶ç™»å½•** Matrix è´¦å·
2. **è¿›å…¥ä»»æ„èŠå¤©å®¤**
3. **ç‚¹å‡»è¾“å…¥æ å·¦ä¾§çš„ "+" æŒ‰é’®**ï¼ˆæ·»åŠ é™„ä»¶æŒ‰é’®ï¼‰
4. **åœ¨å¼¹å‡ºçš„èœå•ä¸­é€‰æ‹© "åˆ›å»ºæŠ•ç¥¨"** (Create poll / åˆ›å»ºæŠ•ç¥¨)
   - å›¾æ ‡æ˜¯ä¸€ä¸ªæŠ•ç¥¨å›¾æ ‡ ğŸ“Š (poll_outlined)
5. **å¡«å†™æŠ•ç¥¨ä¿¡æ¯å¹¶åˆ›å»º**

## æŠ•ç¥¨åŠŸèƒ½ä½ç½®

æŠ•ç¥¨é€‰é¡¹ä¼šå‡ºç°åœ¨ä»¥ä¸‹èœå•ä¸­ï¼š
- è¾“å…¥æ å·¦ä¾§çš„ "+" æŒ‰é’®èœå•
- ä½äº"åˆ†äº«ä½ç½®"ä¹‹åã€"å‘é€å›¾ç‰‡"ä¹‹å‰
- æ‰€æœ‰å¹³å°éƒ½å¯ç”¨ï¼ˆä¸åƒä½ç½®åˆ†äº«ä»…é™ç§»åŠ¨ç«¯ï¼‰

## è°ƒè¯•æ£€æŸ¥æ¸…å•

å¦‚æœçœ‹ä¸åˆ°æŠ•ç¥¨é€‰é¡¹ï¼Œè¯·æ£€æŸ¥ï¼š

### âœ“ ç¡®è®¤ä»£ç å·²æ­£ç¡®ä¿®æ”¹
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la lib/pages/chat/create_poll_dialog.dart
ls -la lib/pages/chat/events/poll_content.dart
ls -la lib/utils/poll_extension.dart

# æ£€æŸ¥ä»£ç é›†æˆ
grep -n "createPoll" lib/l10n/intl_en.arb
grep -n "createPollAction" lib/pages/chat/chat.dart
grep -n "poll" lib/pages/chat/chat_input_row.dart
```

### âœ“ ç¡®è®¤æœ¬åœ°åŒ–å·²ç”Ÿæˆ
```bash
flutter gen-l10n
```

### âœ“ å®Œå…¨é‡æ–°æ„å»º
```bash
flutter clean
flutter pub get
flutter run
```

## æµ‹è¯•æŠ•ç¥¨åŠŸèƒ½

åˆ›å»ºæŠ•ç¥¨åï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š
1. **æŠ•ç¥¨å¡ç‰‡**æ˜¾ç¤ºåœ¨èŠå¤©æ¶ˆæ¯ä¸­
2. åŒ…å«é—®é¢˜å’Œç­”æ¡ˆé€‰é¡¹
3. å¯ä»¥é€‰æ‹©ç­”æ¡ˆå¹¶æŠ•ç¥¨
4. æŠ•ç¥¨åæ˜¾ç¤ºç»“æœï¼ˆå¦‚æœæ˜¯å…¬å¼€æŠ•ç¥¨ï¼‰
5. ç®¡ç†å‘˜å¯ä»¥ç»“æŸæŠ•ç¥¨

## ç¤ºä¾‹æˆªå›¾è¯´æ˜

åœ¨èŠå¤©è¾“å…¥æ ç‚¹å‡»"+"æŒ‰é’®åï¼Œä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„èœå•ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ åˆ†äº«ä½ç½®              â”‚  (ä»…ç§»åŠ¨ç«¯)
â”‚ ğŸ“Š åˆ›å»ºæŠ•ç¥¨              â”‚  â† æ–°å¢çš„æŠ•ç¥¨åŠŸèƒ½
â”‚ ğŸ–¼ï¸  å‘é€å›¾ç‰‡             â”‚
â”‚ ğŸ¥ å‘é€è§†é¢‘              â”‚
â”‚ ğŸ“ å‘é€æ–‡ä»¶              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šçœ‹ä¸åˆ° "åˆ›å»ºæŠ•ç¥¨" é€‰é¡¹
**è§£å†³ï¼š**
1. ç¡®è®¤å·²æ‰§è¡Œ `flutter clean`
2. ç¡®è®¤å·²æ‰§è¡Œ `flutter pub get`
3. å®Œå…¨é‡å¯åº”ç”¨ï¼ˆä¸æ˜¯çƒ­é‡è½½ï¼‰
4. æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®çš„ä½ç½®æŸ¥æ‰¾ï¼ˆè¾“å…¥æ å·¦ä¾§çš„"+"æŒ‰é’®ï¼‰

### é—®é¢˜ï¼šç‚¹å‡»åˆ›å»ºæŠ•ç¥¨æ²¡æœ‰ååº”
**è§£å†³ï¼š**
1. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ `createPollAction` æ–¹æ³•å·²æ­£ç¡®æ·»åŠ åˆ° `chat.dart`
3. ç¡®è®¤æœ¬åœ°åŒ–æ–‡ä»¶å·²é‡æ–°ç”Ÿæˆ

### é—®é¢˜ï¼šæŠ•ç¥¨åˆ›å»ºåä¸æ˜¾ç¤º
**è§£å†³ï¼š**
1. æ£€æŸ¥ `message_content.dart` ä¸­æ˜¯å¦æ·»åŠ äº†æŠ•ç¥¨å¤„ç†é€»è¾‘
2. ç¡®è®¤ `poll_content.dart` æ–‡ä»¶å­˜åœ¨ä¸”æ— è¯­æ³•é”™è¯¯
3. æŸ¥çœ‹ Flutter æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

## éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœä»ç„¶çœ‹ä¸åˆ°æŠ•ç¥¨åŠŸèƒ½ï¼Œè¯·æä¾›ï¼š
1. è¿è¡Œçš„å¹³å°ï¼ˆLinux/Android/iOS/Webï¼‰
2. `flutter doctor` çš„è¾“å‡º
3. è¿è¡Œåº”ç”¨æ—¶çš„æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
4. æ˜¯å¦çœ‹åˆ°äº† "+" æŒ‰é’®èœå•
